<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DevTools - Free Online Image & PDF Tools</title>
    <meta name="description" content="A collection of free, client-side tools to compress, convert, and edit your images and PDFs. Fast, secure, and easy to use." />
    <meta name="keywords" content="image compressor, image optimizer, pdf compressor, merge pdf, split pdf, image resizer, image converter, online tools, free tools, devtools" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_ADSENSE_ID"
     crossorigin="anonymous"></script>
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #f8fafc; /* slate-50 */
        background-image: radial-gradient(circle at top, #ffffff 0%, #f8fafc 50%);
      }
      .dark body {
        background-color: #020617; /* slate-950 */
        background-image: radial-gradient(circle at top, #1e293b 0%, #020617 50%);
      }

      /* Custom Range Slider Styles */
      input[type="range"] {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        background: transparent;
        cursor: pointer;
      }
      input[type="range"]:focus {
        outline: none;
      }

      /* Webkit (Chrome, Safari) Track */
      input[type="range"]::-webkit-slider-runnable-track {
        background: #e2e8f0; /* slate-200 */
        height: 0.5rem;
        border-radius: 0.5rem;
      }
      .dark input[type="range"]::-webkit-slider-runnable-track {
        background: #334155; /* slate-700 */
      }

      /* Webkit (Chrome, Safari) Thumb */
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        margin-top: -6px; /* Position thumb vertically */
        background-color: #3b82f6; /* blue-500 */
        height: 1.5rem;
        width: 1.5rem;
        border-radius: 9999px;
        border: 4px solid white;
        box-shadow: 0 0 0 2px #3b82f6; /* blue-500 */
        transition: transform 0.1s ease-in-out;
      }
      input[type="range"]:active::-webkit-slider-thumb {
        transform: scale(1.1);
      }
      .dark input[type="range"]::-webkit-slider-thumb {
        border-color: #1e293b; /* slate-800 */
      }
      
      /* Mozilla (Firefox) Track */
      input[type="range"]::-moz-range-track {
        background: #e2e8f0; /* slate-200 */
        height: 0.5rem;
        border-radius: 0.5rem;
      }
      .dark input[type="range"]::-moz-range-track {
        background: #334155; /* slate-700 */
      }

      /* Mozilla (Firefox) Thumb */
      input[type="range"]::-moz-range-thumb {
        background-color: #3b82f6; /* blue-500 */
        height: 1.5rem;
        width: 1.5rem;
        border-radius: 9999px;
        border: 4px solid white;
        box-shadow: 0 0 0 2px #3b82f6; /* blue-500 */
        transition: transform 0.1s ease-in-out;
      }
       input[type="range"]:active::-moz-range-thumb {
        transform: scale(1.1);
      }
      .dark input[type="range"]::-moz-range-thumb {
        border-color: #1e293b; /* slate-800 */
      }
    </style>
  <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.3.1",
        "react-dom/client": "https://esm.sh/react-dom@18.3.1/client"
      }
    }
  </script>
  <!-- Add Babel to transpile JSX in the browser -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-slate-50 dark:bg-slate-950 text-slate-800 dark:text-slate-200 antialiased">
    <div id="root"></div>
    <!-- Load the main app script, with type="text/babel" to get it transpiled -->
    <script type="text/babel" data-type="module">
      import React, { useState, useEffect, useCallback, useRef } from 'react';
      import ReactDOM from 'react-dom/client';

      // All components are now in this single file to resolve module loading issues on live preview.

      // --- FROM components/icons.tsx ---

      const LogoIcon = (props) => (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" {...props}>
          <path fillRule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clipRule="evenodd" />
        </svg>
      );

      const UploadIcon = (props) => (
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
            <path strokeLinecap="round" strokeLinejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
          </svg>
      );

      const DownloadIcon = (props) => (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
          <path strokeLinecap="round" strokeLinejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
        </svg>
      );

      const RefreshIcon = (props) => (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}>
          <path strokeLinecap="round" strokeLinejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.181-3.183m-3.181-4.991v4.99" />
        </svg>
      );

      const CompressIcon = (props) => (
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" {...props}>
              <path strokeLinecap="round" strokeLinejoin="round" d="M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5M15 15l5.25 5.25" />
          </svg>
      );

      const ResizeIcon = (props) => (
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" {...props}>
              <path strokeLinecap="round" strokeLinejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9M20.25 20.25h-4.5m4.5 0v-4.5m0 4.5L15 15" />
          </svg>
      );

      const ConvertIcon = (props) => (
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" {...props}>
              <path strokeLinecap="round" strokeLinejoin="round" d="M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5" />
          </svg>
      );

      const PdfIcon = (props) => (
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" {...props}>
          <path d="M1.5 3.75A2.25 2.25 0 013.75 1.5h12.5a2.25 2.25 0 012.25 2.25v15A2.25 2.25 0 0116.25 21H3.75A2.25 2.25 0 011.5 18.75v-15zM9 9.75A.75.75 0 019.75 9h4.5a.75.75 0 010 1.5h-4.5A.75.75 0 019 9.75zm0 3a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75zm0 3a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75z" />
        </svg>
      );

      const MergeIcon = (props) => (
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" {...props}>
              <path strokeLinecap="round" strokeLinejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
              <path strokeLinecap="round" strokeLinejoin="round" d="M3 12l7.5-7.5M3 12l7.5 7.5" />
          </svg>
      );

      const SplitIcon = (props) => (
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" {...props}>
              <path strokeLinecap="round" strokeLinejoin="round" d="M12 4.5v15m0 0l-6.75-6.75M12 19.5l6.75-6.75" />
          </svg>
      );

      // --- FROM components/Header.tsx ---

      const Header = ({ onLogoClick }) => {
        return (
          <header className="bg-white/60 dark:bg-slate-900/60 backdrop-blur-lg shadow-sm sticky top-0 z-50 border-b border-slate-200 dark:border-slate-800">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
              <div className="flex items-center justify-between h-16">
                <button onClick={onLogoClick} className="flex items-center space-x-3 group" aria-label="Go to homepage">
                  <LogoIcon className="h-8 w-8 text-blue-500" />
                  <span className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-slate-900 to-slate-600 dark:from-white dark:to-slate-300 group-hover:opacity-80 transition-opacity">
                    DevTools
                  </span>
                </button>
              </div>
            </div>
          </header>
        );
      };

      // --- FROM components/ToolCard.tsx ---

      const ToolCard = ({ icon, title, description, onClick, disabled = false }) => {
        const cardClasses = `
          group relative text-left p-6 bg-white dark:bg-slate-800/50 rounded-xl shadow-md border border-slate-200 dark:border-slate-800 transition-all duration-300
          ${disabled 
            ? 'cursor-not-allowed' 
            : 'cursor-pointer hover:shadow-xl hover:-translate-y-1.5 hover:border-blue-500 dark:hover:border-blue-500'
          }
        `;
        
        return (
          <button onClick={onClick} className={cardClasses} disabled={disabled}>
            <div className={`transition-opacity ${disabled ? 'opacity-50' : 'opacity-100'}`}>
              <div className="mb-4 w-14 h-14 flex items-center justify-center bg-slate-100 dark:bg-slate-700/50 rounded-lg transition-colors group-hover:bg-blue-100 dark:group-hover:bg-slate-700">
                {icon}
              </div>
              <h3 className="text-lg font-bold text-slate-900 dark:text-white">{title}</h3>
              <p className="mt-1 text-slate-600 dark:text-slate-400">{description}</p>
            </div>
            {disabled && (
              <span className="absolute top-3 right-3 text-xs font-semibold bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 px-2 py-1 rounded-full">
                Coming Soon
              </span>
            )}
          </button>
        );
      };

      // --- FROM components/HomePage.tsx ---

      const imageTools = [
        { slug: 'imageCompressor', icon: CompressIcon, title: 'Image Compressor', description: 'Reduce file size of JPG, PNG, and WEBP images.' },
        { slug: 'imageResizer', icon: ResizeIcon, title: 'Image Resizer', description: 'Resize images to specific dimensions online.' },
        { slug: 'imageConverter', icon: ConvertIcon, title: 'Image Converter', description: 'Convert images to different formats like JPG, PNG, WEBP.' },
      ];

      const pdfTools = [
        { slug: 'pdfCompressor', icon: PdfIcon, title: 'PDF Compressor', description: 'Reduce the file size of your PDF files.' },
        { slug: 'pdfMerge', icon: MergeIcon, title: 'Merge PDF', description: 'Combine multiple PDF files into a single document.' },
        { slug: 'pdfSplit', icon: SplitIcon, title: 'Split PDF', description: 'Extract pages from a PDF file into separate documents.' },
      ];

      const SectionTitle = ({ children }) => (
        <h2 className="text-3xl font-extrabold text-slate-800 dark:text-slate-200 mb-6 flex items-center gap-3">
           <span className="w-3 h-3 rounded-full bg-blue-500"></span>
           {children}
        </h2>
      );

      const HomePage = ({ onToolSelect }) => {
        return (
          <div className="flex flex-col gap-12">
            <div className="text-center p-8 md:p-12 rounded-2xl bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-900 border border-slate-200 dark:border-slate-800 shadow-lg relative overflow-hidden">
              <div className="absolute -top-20 -left-20 w-72 h-72 bg-blue-200/50 dark:bg-blue-900/50 rounded-full filter blur-3xl opacity-50"></div>
              <div className="absolute -bottom-20 -right-20 w-72 h-72 bg-sky-200/50 dark:bg-sky-900/50 rounded-full filter blur-3xl opacity-50"></div>
              <div className="relative">
                  <h1 className="text-4xl md:text-6xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-sky-500 dark:from-blue-400 dark:to-sky-400 pb-2">
                    Your Complete Toolkit for Files
                  </h1>
                  <p className="mt-4 max-w-3xl mx-auto text-lg text-slate-600 dark:text-slate-400">
                    Quickly compress, convert, and edit your images and PDFs with our collection of free, easy-to-use online tools. Secure and client-side.
                  </p>
              </div>
            </div>
            <section>
              <SectionTitle>Image Tools</SectionTitle>
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                {imageTools.map((tool) => (
                  <ToolCard 
                    key={tool.slug}
                    icon={<tool.icon className="w-8 h-8 text-blue-500 transition-transform duration-300 group-hover:scale-110" />}
                    title={tool.title}
                    description={tool.description}
                    onClick={() => onToolSelect(tool.slug)}
                    disabled={tool.slug !== 'imageCompressor'}
                  />
                ))}
              </div>
            </section>
            <section>
              <SectionTitle>PDF Tools</SectionTitle>
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                {pdfTools.map((tool) => (
                  <ToolCard 
                    key={tool.slug}
                    icon={<tool.icon className="w-8 h-8 text-red-500 transition-transform duration-300 group-hover:scale-110" />}
                    title={tool.title}
                    description={tool.description}
                    onClick={() => { /* onToolSelect(tool.slug) - Enable when tool is ready */ }}
                    disabled
                  />
                ))}
              </div>
            </section>
          </div>
        );
      };


      // --- FROM components/ImageUploader.tsx ---

      const ImageUploader = ({ onImageUpload }) => {
        const [isDragging, setIsDragging] = useState(false);
        const handleFileChange = (e) => {
          if (e.target.files && e.target.files[0]) {
            onImageUpload(e.target.files[0]);
          }
        };
        const handleDragEnter = useCallback((e) => { e.preventDefault(); e.stopPropagation(); setIsDragging(true); }, []);
        const handleDragLeave = useCallback((e) => { e.preventDefault(); e.stopPropagation(); setIsDragging(false); }, []);
        const handleDragOver = useCallback((e) => { e.preventDefault(); e.stopPropagation(); }, []);
        const handleDrop = useCallback((e) => {
          e.preventDefault(); e.stopPropagation(); setIsDragging(false);
          if (e.dataTransfer.files && e.dataTransfer.files[0]) { onImageUpload(e.dataTransfer.files[0]); }
        }, [onImageUpload]);

        return (
          <div className="bg-white dark:bg-slate-800/50 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-800">
              <div className="text-center">
                  <h1 className="text-3xl md:text-4xl font-extrabold text-slate-900 dark:text-white">Online Image Compressor</h1>
                  <p className="mt-2 max-w-2xl mx-auto text-slate-600 dark:text-slate-400">
                      Drastically reduce the file size of your JPEG, PNG, and WEBP images without compromising quality.
                  </p>
              </div>
              <label
                  htmlFor="image-upload"
                  onDragEnter={handleDragEnter} onDragLeave={handleDragLeave} onDragOver={handleDragOver} onDrop={handleDrop}
                  className={`mt-6 group flex flex-col items-center justify-center w-full min-h-[18rem] p-6 sm:p-8 border border-slate-300 dark:border-slate-700 rounded-xl cursor-pointer transition-all duration-300 ease-in-out relative overflow-hidden
                      ${isDragging ? 'ring-4 ring-offset-2 ring-blue-500 dark:ring-offset-slate-900 bg-blue-50 dark:bg-slate-800' : 'hover:border-blue-500 dark:hover:border-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800'}`}>
                  <div className="absolute inset-0 bg-grid-slate-100 dark:bg-grid-slate-700/40 [mask-image:linear-gradient(to_bottom,white,transparent)] dark:[mask-image:linear-gradient(to_bottom,rgba(255,255,255,0.05),transparent)] group-hover:opacity-50 transition-opacity"></div>
                  <div className="flex flex-col items-center justify-center pt-5 pb-6 z-10 text-center">
                      <div className={`p-4 rounded-full transition-all duration-300 ${isDragging ? 'bg-blue-100 dark:bg-blue-900/30 scale-110' : 'bg-slate-100 dark:bg-slate-700 group-hover:scale-105'}`}>
                          <UploadIcon className={`w-10 h-10 transition-colors ${isDragging ? 'text-blue-600' : 'text-slate-500 dark:text-slate-400'}`} />
                      </div>
                      <p className="mb-2 text-lg font-semibold text-slate-700 dark:text-slate-300 mt-4">
                          <span className="text-blue-500 dark:text-blue-400">Click to upload</span> or drag and drop
                      </p>
                      <p className="text-sm text-slate-500 dark:text-slate-400 px-4">Supports JPEG, PNG, WEBP (Max. 10MB)</p>
                  </div>
                  <input id="image-upload" type="file" className="hidden" onChange={handleFileChange} accept="image/jpeg,image/png,image/webp" />
              </label>
          </div>
        );
      };


      // --- FROM components/ImageComparer.tsx ---

      const formatFileSize = (bytes) => {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      };

      const ImagePreview = ({ title, imageSrc, fileSize, reduction, isLoading }) => (
        <div className="flex flex-col w-full h-full bg-white dark:bg-slate-800/50 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm">
          <h3 className="text-lg font-semibold mb-3 text-center text-slate-900 dark:text-white">{title}</h3>
          <div className="w-full aspect-square bg-slate-100 dark:bg-slate-900/50 rounded-lg overflow-hidden relative flex items-center justify-center">
            {isLoading && (
              <div className="absolute inset-0 bg-white/50 dark:bg-slate-800/50 flex items-center justify-center z-10 backdrop-blur-sm">
                <div className="w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
              </div>
            )}
            {imageSrc ? <img src={imageSrc} alt={title} className="w-full h-full object-contain" /> : <div className="text-slate-400">Preview loading...</div>}
          </div>
          <div className="text-center mt-3 h-12 flex flex-col items-center justify-center">
            {fileSize !== undefined && <div className="font-bold text-xl text-slate-800 dark:text-slate-100">{formatFileSize(fileSize)}</div>}
            {reduction !== undefined && (
              <span className={`px-2.5 py-1 mt-1 rounded-full text-sm font-semibold ${reduction >= 0 ? 'bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300' : 'bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300'}`}>
                {reduction >= 0 ? `-${reduction}%` : `+${Math.abs(reduction)}%`}
              </span>
            )}
          </div>
        </div>
      );

      const ImageComparer = ({ originalImage, compressedImage, compressionLevel, setCompressionLevel, isCompressing, onReset }) => {
        const reductionPercentage = compressedImage ? Math.round(((originalImage.size - compressedImage.size) / originalImage.size) * 100) : 0;
        return (
          <div className="flex flex-col gap-6 md:gap-8">
            <div className="bg-white dark:bg-slate-800/50 p-5 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-800">
              <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-5">
                  <div className="flex-grow">
                      <label htmlFor="compression-slider" className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                          Compression Quality: <span className="font-bold text-lg text-blue-500 dark:text-blue-400">{Math.round(compressionLevel * 100)}%</span>
                      </label>
                      <input id="compression-slider" type="range" min="0.1" max="1" step="0.01" value={compressionLevel} onChange={(e) => setCompressionLevel(parseFloat(e.target.value))} disabled={isCompressing} />
                  </div>
                   <div className="flex items-center gap-3 flex-shrink-0">
                      <button onClick={onReset} className="flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-slate-100 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600">
                          <RefreshIcon className="w-4 h-4" /> New Image
                      </button>
                      <a href={compressedImage?.url} download={`optimized-${originalImage.file.name.split('.').slice(0, -1).join('.')}.jpg`} className={`flex items-center justify-center gap-2 px-5 py-2.5 text-sm font-semibold text-white bg-blue-500 border border-transparent rounded-lg shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-opacity ${!compressedImage || isCompressing ? 'opacity-50 cursor-not-allowed' : 'opacity-100'}`} aria-disabled={!compressedImage || isCompressing} onClick={(e) => (!compressedImage || isCompressing) && e.preventDefault()}>
                          <DownloadIcon className="w-5 h-5" /> Download
                      </a>
                   </div>
              </div>
            </div>
            <div className="flex flex-col md:flex-row items-stretch justify-center gap-6">
              <div className="flex-1 min-w-0"><ImagePreview title="Original" imageSrc={originalImage.url} fileSize={originalImage.size} /></div>
              <div className="hidden md:flex items-center justify-center"><div className="bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400 rounded-full h-12 w-12 flex items-center justify-center font-bold text-lg shrink-0">VS</div></div>
              <div className="flex-1 min-w-0"><ImagePreview title="Compressed" imageSrc={compressedImage?.url} fileSize={compressedImage?.size} reduction={reductionPercentage} isLoading={isCompressing} /></div>
            </div>
          </div>
        );
      };

      // --- FROM components/ImageCompressorTool.tsx ---

      const ImageCompressorTool = () => {
        const [originalImage, setOriginalImage] = useState(null);
        const [compressedImage, setCompressedImage] = useState(null);
        const [compressionLevel, setCompressionLevel] = useState(0.75);
        const [isCompressing, setIsCompressing] = useState(false);
        const handleImageUpload = (file) => {
          const reader = new FileReader();
          reader.onload = (e) => {
            if (e.target?.result) {
              setOriginalImage({ file, url: e.target.result, size: file.size });
              setCompressedImage(null);
            }
          };
          reader.readAsDataURL(file);
        };
        const compressImage = useCallback(async () => {
          if (!originalImage) return;
          setIsCompressing(true);
          const image = new Image();
          image.src = originalImage.url;
          image.onload = () => {
            const canvas = document.createElement('canvas');
            canvas.width = image.width;
            canvas.height = image.height;
            const ctx = canvas.getContext('2d');
            if (ctx) {
              ctx.drawImage(image, 0, 0);
              const compressedDataUrl = canvas.toDataURL('image/jpeg', compressionLevel);
              const base64Data = compressedDataUrl.split(',')[1];
              const binaryData = atob(base64Data);
              setCompressedImage({ url: compressedDataUrl, size: binaryData.length });
            }
            setIsCompressing(false);
          };
          image.onerror = () => { console.error("Error loading image for compression."); setIsCompressing(false); }
        }, [originalImage, compressionLevel]);
        useEffect(() => {
          if (originalImage) {
            const timer = setTimeout(() => { compressImage(); }, 300);
            return () => clearTimeout(timer);
          }
        }, [originalImage, compressionLevel, compressImage]);
        const resetApp = () => { setOriginalImage(null); setCompressedImage(null); };

        return (
          <div className="flex flex-col gap-6">
            {!originalImage ? (
              <ImageUploader onImageUpload={handleImageUpload} />
            ) : (
              <ImageComparer originalImage={originalImage} compressedImage={compressedImage} compressionLevel={compressionLevel} setCompressionLevel={setCompressionLevel} isCompressing={isCompressing} onReset={resetApp} />
            )}
          </div>
        );
      };


      // --- FROM components/AdsenseBlock.tsx ---

      const AdsenseBlock = ({ adSlot, adFormat = "auto", fullWidthResponsive = true, style = { display: 'block' } }) => {
        const adRef = useRef(null);
        useEffect(() => {
          const insElement = adRef.current;
          if (!insElement) { return; }
          const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting && insElement.dataset.adStatus !== 'filled') {
                insElement.dataset.adStatus = 'filled';
                try { (window.adsbygoogle = window.adsbygoogle || []).push({}); } 
                catch (e) { console.error("AdSense error: ", e); delete insElement.dataset.adStatus; }
              }
            });
          });
          observer.observe(insElement);
          return () => { if (insElement) { observer.unobserve(insElement); } };
        }, [adSlot]); // Re-run if adSlot changes

        return (
          <ins
            ref={adRef}
            className="adsbygoogle"
            style={style}
            data-ad-client="ca-pub-YOUR_ADSENSE_ID"
            data-ad-slot={adSlot}
            data-ad-format={adFormat}
            data-full-width-responsive={fullWidthResponsive.toString()}
          ></ins>
        );
      };


      // --- FROM components/Footer.tsx ---

      const Footer = () => {
        return (
          <footer className="bg-transparent mt-12">
            <div className="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-sm text-slate-500 dark:text-slate-400">
              <p>&copy; {new Date().getFullYear()} DevTools. All processing is done on your device.</p>
            </div>
          </footer>
        );
      };


      // --- FROM App.tsx ---

      const App = () => {
        const [activeTool, setActiveTool] = useState('home');
        const renderActiveTool = () => {
          switch (activeTool) {
            case 'imageCompressor': return <ImageCompressorTool />;
            default: return <HomePage onToolSelect={setActiveTool} />;
          }
        };

        return (
          <div className="min-h-screen flex flex-col">
            <Header onLogoClick={() => setActiveTool('home')} />
            <main className="flex-grow w-full max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
              <div className="flex flex-col lg:flex-row gap-8 lg:gap-10">
                <div className="flex-1">{renderActiveTool()}</div>
                <aside className="w-full lg:w-72 flex-shrink-0">
                  <div className="sticky top-24 space-y-6">
                     <div className="hidden lg:block">
                        <AdsenseBlock adSlot="YOUR_AD_SLOT_ID_SIDEBAR" adFormat="auto" fullWidthResponsive={true} style={{ display: 'block' }} />
                      </div>
                    <div className="p-5 bg-white dark:bg-slate-800/50 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800">
                      <h3 className="text-lg font-semibold mb-3 text-slate-900 dark:text-white">How It Works</h3>
                      <ol className="list-decimal list-inside space-y-2 text-slate-600 dark:text-slate-400">
                        <li>Select a tool.</li>
                        <li>Upload your file(s).</li>
                        <li>Adjust settings.</li>
                        <li>Download your result.</li>
                      </ol>
                    </div>
                     <div className="lg:hidden">
                          <AdsenseBlock adSlot="YOUR_AD_SLOT_ID_RESPONSIVE" style={{ display: 'block' }} />
                      </div>
                  </div>
                </aside>
              </div>
            </main>
            <Footer />
          </div>
        );
      };


      // --- Original index.tsx render call ---

      const rootElement = document.getElementById('root');
      if (!rootElement) {
        throw new Error("Could not find root element to mount to");
      }
      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
  </body>
</html>
